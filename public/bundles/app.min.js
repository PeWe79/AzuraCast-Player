(()=>{var __webpack_modules__={"./src/app.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _scss_app_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scss/app.scss */ "./src/scss/app.scss");\n/* harmony import */ var _js_filters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/filters */ "./src/js/filters.js");\n/* harmony import */ var _js_filters__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_filters__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _js_favorite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./js/favorite */ "./src/js/favorite.js");\n/* harmony import */ var _js_favorite__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_js_favorite__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _js_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./js/api */ "./src/js/api.js");\n/* harmony import */ var _js_audio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./js/audio */ "./src/js/audio.js");\n/* harmony import */ var _js_scene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./js/scene */ "./src/js/scene.js");\n/* harmony import */ var _js_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./js/utils */ "./src/js/utils.js");\n/* harmony import */ var _js_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./js/store */ "./src/js/store.js");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/**\n * Main app JS entry file.\n */\n\n\n\n\n\n\n\n\n\n// main vue app\nnew Vue({\n  el: "#app",\n  data: {\n    // toggles\n    init: false,\n    visible: true,\n    playing: false,\n    loading: false,\n    sidebar: false,\n    volume: 80,\n    // sidebar toggles\n    sbActive: false,\n    sbVisible: false,\n    // stations stuff\n    route: "/",\n    stations: [],\n    station: {},\n    songHist: [],\n    track: {},\n    image: {},\n    itunes: {},\n    currentsong: {},\n    nextPlay: {},\n    favorites: [],\n    errors: {},\n    // timer stuff\n    timeStart: 0,\n    timeDisplay: "00:00:00",\n    timeItv: null,\n    // sorting stuff\n    searchText: "",\n    sortParam: "listeners",\n    sortOrder: "desc",\n    // timer stuff\n    anf: null,\n    sto: null,\n    itv: null\n  },\n  // watch methods\n  watch: {\n    // watch playing status\n    playing: function playing() {\n      if (this.playing) {\n        this.startClock();\n      } else {\n        this.stopClock();\n      }\n    },\n    // update player volume\n    volume: function volume() {\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].setVolume(this.volume);\n    }\n  },\n  // computed methods\n  computed: {\n    // filter stations list\n    channelsList: function channelsList() {\n      var _this = this;\n      var list = this.stations.slice();\n      var search = this.searchText.replace(/[^\\w\\s\\-]+/g, "").replace(/[\\r\\s\\t\\n]+/g, " ").trim();\n      if (search && search.length > 1) {\n        list = _js_utils__WEBPACK_IMPORTED_MODULE_6__["default"].search(list, "name", search);\n      }\n      if (this.sortParam) {\n        list = _js_utils__WEBPACK_IMPORTED_MODULE_6__["default"].sort(list, this.sortParam, this.sortOrder, false);\n      }\n      if (this.station.shortcode) {\n        list = list.map(function (i) {\n          i.active = _this.station.shortcode === i.shortcode ? true : false;\n          return i;\n        });\n      }\n      return list;\n    },\n    // filter songs list\n    songsList: function songsList() {\n      var list = this.songHist.slice();\n      return list;\n    },\n    // sort-by label for buttons, etc\n    sortLabel: function sortLabel() {\n      switch (this.sortParam) {\n        case "name":\n          return "Station Name";\n        case "listeners":\n          return "Listeners Count";\n        case "favorite":\n          return "Saved Favorites";\n        case "genre":\n          return "Music Genre";\n      }\n    },\n    // check if audio can be played\n    canPlay: function canPlay() {\n      return this.station.shortcode && !this.loading ? true : false;\n    },\n    // check if a station is selected\n    hasChannel: function hasChannel() {\n      return this.station.shortcode ? true : false;\n    },\n    // check if there are tracks loaded\n    hasSongs: function hasSongs() {\n      return this.songHist.length ? true : false;\n    },\n    // check for errors that would affect playback\n    hasErrors: function hasErrors() {\n      if (this.errors.support || this.errors.stream) return true;\n      if (this.errors.stations && !this.stations.length) return true;\n      return false;\n    }\n  },\n  // custom methods\n  methods: {\n    // run maintenance tasks on a timer\n    setupMaintenance: function setupMaintenance() {\n      var _this2 = this;\n      this.itv = setInterval(function () {\n        _this2.getChannels(_this2.sidebar); // update stations\n        _this2.getSongs(_this2.station); // update station tracks\n      }, 1000 * 30);\n    },\n    // set an erro message\n    setError: function setError(key, err) {\n      var errors = Object.assign({}, this.errors);\n      errors[key] = String(err || "").trim();\n      if (err) console.warn("ERROR(" + key + "):", err);\n      this.errors = errors;\n    },\n    // clear all error messages\n    clearError: function clearError(key) {\n      var errors = Object.assign({}, this.errors);\n      delete errors[key];\n      this.errors = errors;\n    },\n    // check if an error has been set for a key\n    hasError: function hasError(key) {\n      return key && this.errors.hasOwnProperty(key);\n    },\n    // flush all errors\n    flushErrors: function flushErrors() {\n      this.errors = {};\n    },\n    // show player when app is mounted\n    setupEvents: function setupEvents() {\n      var _this3 = this;\n      document.addEventListener("visibilitychange", function () {\n        _this3.visible = document.visibilityState === "visible";\n      });\n      window.addEventListener("hashchange", function () {\n        return _this3.applyRoute(window.location.hash);\n      });\n      window.addEventListener("keydown", this.onKeyboard);\n      // audio related events\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].on("waiting", this.onWaiting);\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].on("playing", this.onPlaying);\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].on("ended", this.onEnded);\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].on("error", this.onError);\n    },\n    // hide spinner and show player\n    initPlayer: function initPlayer() {\n      var _this4 = this;\n      setTimeout(function () {\n        document.querySelector("#_spnr").style.display = "none";\n        document.querySelector("#player-wrap").style.opacity = "1";\n        _this4.init = true;\n      }, 100);\n    },\n    // reset selected station\n    resetPlayer: function resetPlayer() {\n      this.closeAudio();\n      this.flushErrors();\n      this.station = {};\n      this.songHist = [];\n    },\n    // try resuming stream problem if possible\n    tryAgain: function tryAgain() {\n      if (this.hasError("support")) {\n        this.flushErrors();\n        setTimeout(this.setupAudio, 1);\n      } else {\n        this.flushErrors();\n        this.playChannel(this.station);\n      }\n    },\n    // show/hide the sidebar\n    toggleSidebar: function toggleSidebar(toggle) {\n      var _this5 = this;\n      var state = typeof toggle === "boolean" ? toggle : false;\n      if (state) {\n        this.sbActive = true; // bring to front\n        this.sbVisible = true; // show drawer\n        this.$refs.sidebarDrawer.focus();\n      } else {\n        this.sbVisible = false;\n        setTimeout(function () {\n          _this5.sbActive = false;\n        }, 500);\n      }\n    },\n    // toggle stream playback for current selected station\n    togglePlay: function togglePlay(e) {\n      e && e.preventDefault();\n      if (this.loading) return;\n      if (this.playing) return this.closeAudio();\n      this.playChannel(this.station);\n    },\n    // save volume to store\n    saveVolume: function saveVolume() {\n      _js_store__WEBPACK_IMPORTED_MODULE_7__["default"].set("player_volume", this.volume);\n    },\n    // load saved volume from store\n    loadVolume: function loadVolume() {\n      var vol = parseInt(_js_store__WEBPACK_IMPORTED_MODULE_7__["default"].get("player_volume")) || 80;\n      this.volume = vol;\n    },\n    // load last sort options from store\n    loadSortOptions: function loadSortOptions() {\n      var opts = _js_store__WEBPACK_IMPORTED_MODULE_7__["default"].get("sorting_data");\n      if (opts && opts.param) this.sortParam = opts.param;\n      if (opts && opts.order) this.sortOrder = opts.order;\n    },\n    // toggle sort order\n    toggleSortOrder: function toggleSortOrder() {\n      this.sortOrder = this.sortOrder === "asc" ? "desc" : "asc";\n    },\n    // apply sorting and toggle order\n    sortBy: function sortBy(param, order) {\n      if (this.sortParam === param) {\n        this.toggleSortOrder();\n      } else {\n        this.sortOrder = order || "asc";\n      }\n      this.sortParam = param;\n      _js_store__WEBPACK_IMPORTED_MODULE_7__["default"].set("sorting_data", {\n        param: this.sortParam,\n        order: this.sortOrder\n      });\n    },\n    // load saved favs list from store\n    loadFavorites: function loadFavorites() {\n      var favs = _js_store__WEBPACK_IMPORTED_MODULE_7__["default"].get("favorites_data");\n      if (!Array.isArray(favs)) return;\n      this.favorites = favs;\n    },\n    // save favs to a .m3u file\n    saveFavorites: function saveFavorites() {\n      var _this6 = this;\n      var data = "#EXTM3U";\n      var _iterator = _createForOfIteratorHelper(this.favorites),\n        _step;\n      try {\n        var _loop = function _loop() {\n          var id = _step.value;\n          var station = _this6.stations.filter(function (c) {\n            return c.shortcode === id;\n          }).shift();\n          if (!station) return 1; // continue\n          data += "\\n\\n";\n          data += "#EXTINF:0,".concat(station.title, " [AzuraCast]\\n");\n          data += "".concat(station.mp3file);\n        };\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          if (_loop()) continue;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var elm = document.createElement("a");\n      elm.setAttribute("href", "data:audio/mpegurl;charset=utf-8," + encodeURIComponent(data));\n      elm.setAttribute("download", "azuracast_favorites.m3u");\n      elm.setAttribute("target", "_blank");\n      document.body.appendChild(elm);\n      setTimeout(function () {\n        return elm.click();\n      }, 100);\n      setTimeout(function () {\n        return elm.remove();\n      }, 1000);\n    },\n    // toggle favorite station by id\n    toggleFavorite: function toggleFavorite(id, toggle) {\n      var favs = this.favorites.slice();\n      favs = favs.filter(function (fid) {\n        return fid !== id;\n      });\n      if (toggle) favs.push(id);\n      this.favorites = favs;\n      this.updateCurrentChannel();\n      _js_store__WEBPACK_IMPORTED_MODULE_7__["default"].set("favorites_data", favs);\n    },\n    // close active audio\n    closeAudio: function closeAudio() {\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].stopAudio();\n      this.playing = false;\n    },\n    // setup animation canvas\n    setupCanvas: function setupCanvas() {\n      _js_scene__WEBPACK_IMPORTED_MODULE_5__["default"].setupCanvas();\n    },\n    // audio visualizer animation loop\n    updateCanvas: function updateCanvas() {\n      this.anf = requestAnimationFrame(this.updateCanvas);\n      if (this.visible) {\n        var freq = _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].getFreqData(this.playing);\n        _js_scene__WEBPACK_IMPORTED_MODULE_5__["default"].updateObjects(freq);\n      }\n    },\n    // get stations data from api\n    getChannels: function getChannels(sidebar) {\n      var _this7 = this;\n      _js_api__WEBPACK_IMPORTED_MODULE_3__["default"].getChannels(function (err, stations) {\n        if (err) return _this7.setError("stations", err);\n        _this7.stations = stations;\n        _this7.clearError("stations");\n        _this7.updateCurrentChannel();\n        _this7.applyRoute(window.location.hash, sidebar);\n      });\n    },\n    // get songs list for a station from api\n    getSongs: function getSongs(station, cb) {\n      var _this8 = this;\n      if (!station || !station.shortcode || !station.songsurl) return;\n      if (!this.isCurrentChannel(station)) {\n        this.songHist = [];\n        this.track = {};\n        this.currentsong = {}, this.nextPlay = {}, this.image = {};\n      }\n      _js_api__WEBPACK_IMPORTED_MODULE_3__["default"].getSongs(station, function (err, songs) {\n        if (err) return _this8.setError("songs", err);\n        if (typeof cb === "function") cb(songs);\n        _this8.track = songs.now_playing.song;\n        _this8.currentsong = songs.now_playing;\n        _this8.songHist = songs.song_history;\n        _this8.image = songs.now_playing.song;\n        _this8.clearError("songs");\n\n        // get cover\n        var n = _this8.currentsong.song.text;\n        _this8.getCover(n);\n      });\n\n      // get next song from station\n      _js_api__WEBPACK_IMPORTED_MODULE_3__["default"].getNextSong(station, function (err, reslt) {\n        if (err) return _this8.setError("Next songs", err);\n        if (typeof cb === "function") cb(reslt);\n        _this8.nextPlay = reslt.playing_next.song;\n        _this8.clearError("Next songs");\n      });\n    },\n    // get album cover\n    getCover: function getCover(t) {\n      var _this9 = this;\n      this.itunes = {};\n      var url = "https://itunes.apple.com/search?term==" + encodeURIComponent(t) + "&media=music&limit=1";\n      axios.get(url).then(function (response) {\n        if (response.data.results.length == 1) {\n          var cover = response.data.results[0].artworkUrl100.replace("100x100", "500x500");\n          _this9.itunes = {\n            cover: cover\n          };\n          console.log("%c Cover found from iTunes!", "background:green; color: white;");\n        } else {\n          _this9.itunes = _this9.image;\n          console.log("%c Cover not found: Get default:", "background: red; color: white;");\n        }\n      })["catch"](function (err) {\n        if (err) {\n          console.log("Error data ===> ", err);\n        }\n      });\n    },\n    // checks is a station is currently selected\n    isCurrentChannel: function isCurrentChannel(station) {\n      if (!station || !station.shortcode || !this.station.shortcode) return false;\n      if (this.station.shortcode !== station.shortcode) return false;\n      return true;\n    },\n    // update data for current selected channel\n    updateCurrentChannel: function updateCurrentChannel() {\n      var _iterator2 = _createForOfIteratorHelper(this.stations),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var c = _step2.value;\n          // see if channel has been saved as a favorite\n          c.favorite = this.favorites.indexOf(c.shortcode) >= 0;\n          // see if channel is currently selected\n          if (this.isCurrentChannel(c)) {\n            this.station = Object.assign(this.station, c);\n            c.active = true;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    },\n    // play audio stream for a station\n    playChannel: function playChannel(station) {\n      if (this.playing || !station || !station.mp3file) return;\n      this.loading = true;\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].playSource(station.mp3file);\n      _js_audio__WEBPACK_IMPORTED_MODULE_4__["default"].setVolume(this.volume);\n    },\n    // select a station to play\n    selectChannel: function selectChannel(station) {\n      var play = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!station || !station.shortcode) return;\n      if (this.isCurrentChannel(station)) return;\n      this.closeAudio();\n      this.toggleSidebar(false);\n      this.setRoute(station.route);\n      this.getSongs(station);\n      this.station = station;\n      // attempt to play only after user insteraction, triggered from clicking a station on the list\n      if (play) {\n        this.playChannel(station);\n      }\n    },\n    // set station route\n    setRoute: function setRoute(route) {\n      route = "/" + String(route || "").replace(/^[\\#\\/]+|[\\/]+$/g, "").trim();\n      window.location.hash = route;\n      this.route = route;\n    },\n    // parse url hash route actions\n    applyRoute: function applyRoute(route) {\n      var sidebar = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var data = String(route || "").replace(/^[\\#\\/]+|[\\/]+$/g, "").trim().split("/");\n      var action = data.length ? data.shift() : "";\n      var param = data.length ? data.shift() : "";\n\n      // select a station from the url\n      if (action === "station" && param) {\n        var station = this.stations.filter(function (c) {\n          return c.shortcode === param;\n        }).shift();\n        if (station && station.shortcode) {\n          return this.selectChannel(station);\n        }\n      }\n      // nothing to do, reset player\n      this.closeAudio();\n      this.resetPlayer();\n      this.toggleSidebar(sidebar);\n    },\n    // on keyboard events\n    onKeyboard: function onKeyboard(e) {\n      var k = e.key || "";\n      if (k === " " && this.station.shortcode) return this.togglePlay();\n      if (k === "Enter") return this.toggleSidebar(true);\n      if (k === "Escape") return this.toggleSidebar(false);\n    },\n    // waiting for media to load\n    onWaiting: function onWaiting(e) {\n      var _this10 = this;\n      if (this.sto) clearInterval(this.sto);\n      this.sto = setTimeout(function () {\n        return _this10.onError(e);\n      }, 10000);\n      this.playing = false;\n      this.loading = true;\n    },\n    // audio stream playing\n    onPlaying: function onPlaying(e) {\n      this.clearError("stream");\n      this.playing = true;\n      this.loading = false;\n    },\n    // audio stream ended\n    onEnded: function onEnded(e) {\n      this.playing = false;\n      this.loading = false;\n    },\n    // error loading stream\n    onError: function onError(e) {\n      this.closeAudio();\n      this.setError("stream", "The selected stream (".concat(this.station.title, ") could not load, or stopped loading due to network problems."));\n      this.playing = false;\n      this.loading = false;\n    },\n    // start tracking playback time\n    startClock: function startClock() {\n      this.stopClock();\n      this.timeStart = Date.now();\n      this.timeItv = setInterval(this.updateClock, 1000);\n      this.updateClock();\n    },\n    // update tracking playback time\n    updateClock: function updateClock() {\n      var p = function p(n) {\n        return n < 10 ? "0" + n : "" + n;\n      };\n      var elapsed = (Date.now() - this.timeStart) / 1000;\n      var seconds = Math.floor(elapsed % 60);\n      var minutes = Math.floor(elapsed / 60 % 60);\n      var hours = Math.floor(elapsed / 3600);\n      this.timeDisplay = p(hours) + ":" + p(minutes) + ":" + p(seconds);\n    },\n    // stop tracking playback time\n    stopClock: function stopClock() {\n      if (this.timeItv) clearInterval(this.timeItv);\n      this.timeItv = null;\n    },\n    // clear timer refs\n    clearTimers: function clearTimers() {\n      if (this.sto) clearTimeout(this.sto);\n      if (this.itv) clearInterval(this.itv);\n      if (this.anf) cancelAnimationFrame(this.anf);\n    },\n    // pass height property to css\n    setCssHeight: function setCssHeight(elm, height) {\n      elm.style.setProperty("--height", "".concat(height, "px"));\n    },\n    // keep track of window height\n    updateHeight: function updateHeight() {\n      var _this11 = this;\n      var root = document.querySelector(":root");\n      this.setCssHeight(root, window.innerHeight);\n      window.addEventListener("resize", function (e) {\n        return _this11.setCssHeight(root, window.innerHeight);\n      });\n    } // ...\n  },\n  // on app mounted\n  mounted: function mounted() {\n    this.loadSortOptions();\n    this.loadFavorites();\n    this.loadVolume();\n    this.setupEvents();\n    this.getChannels(true);\n    this.setupCanvas();\n    this.updateCanvas();\n    this.setupMaintenance();\n    this.updateHeight();\n    this.initPlayer();\n  },\n  // on app destroyed\n  destroyed: function destroyed() {\n    this.closeAudio();\n    this.clearTimers();\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/app.js?')},"./src/js/api.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"./src/js/config.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/**\n * AzuraCast API handler\n */\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  // get station data from api\n  getChannels: function getChannels(callback) {\n    var _this = this;\n    var apiurl = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].apiBaseUrl + '/api/stations';\n    var error = 'There was a problem fetching the latest list of music channels from AzuraCast.';\n    axios.get(apiurl).then(function (res) {\n      var list = _this._parseChannels(res.data);\n      if (!list.length) return callback(error, []);\n      return callback(null, list);\n    })[\"catch\"](function (e) {\n      return callback(error + String(e.message || ''), []);\n    });\n  },\n  // fetch songs for a channel\n  getSongs: function getSongs(channel, callback) {\n    var apiurl = channel.songsurl || '';\n    var title = channel.name || '...';\n    var error = 'There was a problem loading the list of songs for channel ' + title + ' from AzuraCast.';\n    axios.get(apiurl).then(function (res) {\n      if (!res.data) return callback(error, []);\n      return callback(null, res.data);\n    })[\"catch\"](function (e) {\n      return callback(error + String(e.message || ''), []);\n    });\n  },\n  // fetch next song for a channel\n  getNextSong: function getNextSong(channel, callback) {\n    var apiurl = channel.songsurl || '';\n    var title = channel.name || '...';\n    var error = 'There was a problem loading the next song for channel ' + title + ' from AzuraCast.';\n    axios.get(apiurl).then(function (res) {\n      if (!res.data) return callback(error, []);\n      return callback(null, res.data);\n    })[\"catch\"](function (e) {\n      return callback(error + String(e.message || ''), []);\n    });\n  },\n  // fetch next song for a channel\n  // parse station list from api response\n  _parseChannels: function _parseChannels(station) {\n    var output = [];\n    if (Array.isArray(station)) {\n      var _iterator = _createForOfIteratorHelper(station),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var c = _step.value;\n          c.plsfile = c.playlist_pls_url;\n          c.mp3file = c.listen_url;\n          c.songsurl = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].apiBaseUrl + '/api/nowplaying/' + c.id;\n          c.image = '/public/img/' + c.shortcode + '.png';\n          c.infourl = c.url;\n          c.twitter = c.twitter ? 'https://twitter.com/@' + c.twitter : '';\n          c.route = '/station/' + c.shortcode;\n          c.listeners = c.mounts[0].listeners.current | 0;\n          c.updated = c.updated | 0;\n          c.favorite = false;\n          c.active = false;\n          output.push(c);\n          // console.log(\"DATA => \"+c.image);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    return output;\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/api.js?")},"./src/js/audio.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * Audio handler object\n */\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  _context: null,\n  _audio: null,\n  _source: null,\n  _gain: null,\n  _analyser: null,\n  _freq: new Uint8Array(32),\n  _hasfreq: false,\n  _counter: 0,\n  _events: {},\n  // setup audio routing, called after user interaction, setup once\n  setupAudio: function setupAudio() {\n    var _this = this;\n    if (this._audio && this._context) return;\n    this._audio = new Audio();\n    this._context = new (window.AudioContext || window.webkitAudioContext)();\n    this._source = this._context.createMediaElementSource(this._audio);\n    this._analyser = this._context.createAnalyser();\n    this._gain = this._context.createGain();\n    this._analyser.fftSize = 32;\n    this._source.connect(this._analyser);\n    this._source.connect(this._gain);\n    this._gain.connect(this._context.destination);\n    this._audio.addEventListener('canplay', function () {\n      _this._freq = new Uint8Array(_this._analyser.frequencyBinCount);\n      _this._audio.play();\n    });\n    ['waiting', 'playing', 'ended', 'stalled', 'error'].forEach(function (event) {\n      _this._audio.addEventListener(event, function (e) {\n        return _this.emit(event, e);\n      });\n    });\n  },\n  // add event listeners to the audio api\n  on: function on(event, callback) {\n    if (event && typeof callback === 'function') {\n      this._events[event] = callback;\n    }\n  },\n  // emit saved audio event\n  emit: function emit(event, data) {\n    if (event && this._events.hasOwnProperty(event)) {\n      this._events[event](data);\n    }\n  },\n  // update and return analyser frequency value (0-1) to control animations\n  getFreqData: function getFreqData(playing) {\n    if (!this._analyser) return 0;\n\n    // this is not working on some devices running safari\n    this._analyser.getByteFrequencyData(this._freq);\n    var _freq = Math.floor(this._freq[4] | 0) / 255;\n\n    // indicate that a freq value can be read\n    if (!this._hasfreq && _freq) {\n      this._hasfreq = true;\n    }\n\n    // frequency data available\n    if (this._hasfreq) return _freq;\n\n    // return fake counter if no freq data available (safari workaround)\n    if (playing) {\n      this._counter = this._counter < .6 ? this._counter + .01 : this._counter;\n    } else {\n      this._counter = this._counter > 0 ? this._counter - .01 : this._counter;\n    }\n    return this._counter;\n  },\n  // set audio volume\n  setVolume: function setVolume(volume) {\n    if (!this._gain) return;\n    volume = parseFloat(volume) || 0;\n    volume = volume > 1 ? volume / 100 : volume;\n    volume = volume > 1 ? 1 : volume;\n    volume = volume < 0 ? 0 : volume;\n    this._audio.muted = volume <= 0 ? true : false;\n    this._gain.gain.value = volume;\n  },\n  // stop playing audio\n  stopAudio: function stopAudio() {\n    if (!this._audio) return;\n    try {\n      this._audio.pause();\n    } catch (e) {}\n    try {\n      this._audio.stop();\n    } catch (e) {}\n    try {\n      this._audio.close();\n    } catch (e) {}\n  },\n  // play audio source url\n  playSource: function playSource(source) {\n    this.setupAudio();\n    this.stopAudio();\n    if (this._context.state === 'suspended') {\n      this._context.resume().then(function () {\n        console.log('Audio context has been resumed.');\n      });\n    }\n    this._audio.src = String(source || '') + '?x=' + Date.now();\n    this._audio.preload = 'metadata';\n    this._audio.crossOrigin = 'anonymous';\n    this._audio.autoplay = false;\n    this._audio.load();\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/audio.js?")},"./src/js/config.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  apiBaseUrl: 'https://s1.cloudmu.id'\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/config.js?")},"./src/js/favorite.js":()=>{eval('/**\n * Vue component used to toggle channel favorite\n */\nVue.component(\'fav-btn\', {\n  props: {\n    id: {\n      type: String,\n      "default": \'\',\n      required: true\n    },\n    text: {\n      type: String,\n      "default": \'\',\n      required: false\n    },\n    active: {\n      type: Boolean,\n      "default": false\n    }\n  },\n  template: "\\n    <button class=\\"hover-text focus-text\\" @click.stop=\\"$emit(\'change\', id, !active)\\" title=\\"Toggle save favorite station\\">\\n      <span>\\n        <i v-if=\\"active\\" class=\\"ico ico-favs-check text-primary fx fx-drop-in\\" key=\\"on\\"></i>\\n        <i v-else class=\\"ico ico-favs-add fx fx-drop-in\\" key=\\"off\\"></i>\\n      </span>\\n      <span v-if=\\"text\\">&nbsp; {{ text }}</span>\\n    </button>"\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/favorite.js?')},"./src/js/filters.js":()=>{eval("/**\n * Vue custom filters\n */\n\n// comma separate long numerical values\nVue.filter('toCommas', function (num, decimals) {\n  var o = {\n    style: 'decimal',\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals\n  };\n  return new Intl.NumberFormat('en-US', o).format(num);\n});\n\n// sanitize text data by only allowing alnums and some symbols\nVue.filter('toText', function (str, def) {\n  str = String(str || '').replace(/[^\\w\\`\\'\\-\\,\\.\\!\\?]+/g, ' ').replace(/\\s\\s+/g, ' ').trim();\n  return str || String(def || '');\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/filters.js?")},"./src/js/scene.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _sphere__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sphere */ "./src/js/sphere.js");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/**\n * ThreeJS scene handler\n */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  _wrap: null,\n  _canvas: null,\n  _renderer: null,\n  _scene: null,\n  _camera: null,\n  _box: null,\n  _mouse: {\n    x: 0,\n    y: 0\n  },\n  _objects: [],\n  // setup animation canvas\n  setupCanvas: function setupCanvas() {\n    this._wrap = document.querySelector(\'#player-wrap\');\n    this._canvas = document.querySelector(\'#player-canvas\');\n    this._box = this._wrap.getBoundingClientRect();\n\n    // setup scene and renderer\n    this._scene = new THREE.Scene();\n    this._renderer = new THREE.WebGLRenderer({\n      canvas: this._canvas,\n      alpha: true,\n      antialias: true,\n      precision: \'lowp\'\n    });\n    this._renderer.setClearColor(0x000000, 0);\n    this._renderer.setPixelRatio(window.devicePixelRatio);\n\n    // setup camera\n    this._camera = new THREE.PerspectiveCamera(60, this._box.width / this._box.height, 0.1, 20000);\n    this._camera.lookAt(this._scene.position);\n    this._camera.position.set(0, 0, 300);\n    this._camera.rotation.set(0, 0, 0);\n\n    // add and create objects\n    this._objects.push(_sphere__WEBPACK_IMPORTED_MODULE_0__["default"]);\n    var _iterator = _createForOfIteratorHelper(this._objects),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var o = _step.value;\n        o.create(this._box, this._scene);\n      }\n      // setup events\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    window.addEventListener(\'mousemove\', this.updateMouse.bind(this));\n    window.addEventListener(\'resize\', this.updateSize.bind(this));\n    this.updateMouse();\n    this.updateSize();\n  },\n  // update custom objects in 3d scene\n  updateObjects: function updateObjects(freq) {\n    var _iterator2 = _createForOfIteratorHelper(this._objects),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var o = _step2.value;\n        o.update(this._box, this._mouse, freq);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    this._renderer.render(this._scene, this._camera);\n  },\n  // update canvas size\n  updateSize: function updateSize() {\n    if (!this._wrap || !this._canvas) return;\n    this._box = this._wrap.getBoundingClientRect();\n    this._canvas.width = this._box.width;\n    this._canvas.height = this._box.height;\n    this._camera.aspect = this._box.width / this._box.height;\n    this._camera.updateProjectionMatrix();\n    this._renderer.setSize(this._box.width, this._box.height);\n  },\n  // update mouse position from center of canvas\n  updateMouse: function updateMouse(e) {\n    if (!this._box) return;\n    var centerX = this._box.left + this._box.width / 2;\n    var centerY = this._box.top + this._box.height / 2;\n    if (e) {\n      this._mouse.x = Math.max(0, e.pageX || e.clientX || 0) - centerX;\n      this._mouse.y = Math.max(0, e.pageY || e.clientY || 0) - centerY;\n    } else {\n      this._mouse.x = centerX;\n      this._mouse.y = centerY;\n    }\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/scene.js?')},"./src/js/sphere.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * ThreeJS scene sphere object\n */\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  group: null,\n  shapes: [],\n  move: new THREE.Vector3(0, 0, 0),\n  touch: false,\n  ease: 8,\n  // create and add sphere to scene\n  create: function create(box, scene) {\n    this.group = new THREE.Object3D();\n    var shape1 = new THREE.CircleGeometry(1, 10);\n    var shape2 = new THREE.CircleGeometry(2, 20);\n    var points = new THREE.SphereGeometry(100, 30, 14).vertices;\n    var material = new THREE.MeshNormalMaterial({\n      transparent: true,\n      opacity: 0,\n      side: THREE.DoubleSide\n    });\n    var center = new THREE.Vector3(0, 0, 0);\n    var radius = 12;\n    for (var i = 0; i < points.length; i++) {\n      var _points$i = points[i],\n        x = _points$i.x,\n        y = _points$i.y,\n        z = _points$i.z;\n      var home = {\n        x: x,\n        y: y,\n        z: z\n      };\n      var cycle = THREE.Math.randInt(0, 100);\n      var pace = THREE.Math.randInt(10, 30);\n      var shape = new THREE.Mesh(i % 2 ? shape1 : shape2, material);\n      shape.position.set(x, y, z);\n      shape.lookAt(center);\n      shape.userData = {\n        radius: radius,\n        cycle: cycle,\n        pace: pace,\n        home: home\n      };\n      this.group.add(shape);\n    }\n    this.touch = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\n    this.group.position.set(40, 5, 0);\n    this.group.rotation.x = Math.PI / 2 + .6;\n    scene.add(this.group);\n  },\n  // animate sphere on frame loop\n  update: function update(box, mouse, freq) {\n    var xoff = box.width < 800 ? 0 : 40;\n    var zoff = box.width < 800 ? -60 : 20;\n    var zmod = .5 + .5 * freq;\n\n    // prevent sphere from moving left/right on touch devices\n    if (this.touch) {\n      this.group.position.x = xoff;\n    } else {\n      this.move.x = xoff + -(mouse.x * 0.012);\n      this.group.position.x += (this.move.x - this.group.position.x) / this.ease;\n      this.group.position.y += (this.move.y - this.group.position.y) / this.ease;\n    }\n    // move on z-axis with music data and rotate\n    this.group.position.z = zoff + 80 * freq;\n    this.group.rotation.y -= 0.003;\n\n    // adjust individual sphere points\n    for (var i = 0; i < this.group.children.length; i++) {\n      var shape = this.group.children[i];\n      var _shape$userData = shape.userData,\n        radius = _shape$userData.radius,\n        cycle = _shape$userData.cycle,\n        pace = _shape$userData.pace,\n        home = _shape$userData.home;\n      shape.material.opacity = .2 + .8 * freq;\n      shape.position.set(home.x, home.y, home.z);\n      shape.translateZ(zmod * Math.sin(cycle / pace) * radius);\n      shape.userData.cycle++;\n    }\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/sphere.js?")},"./src/js/store.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * Basic localStorage wrapper\n */\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  // save data\n  set: function set(key, data, ttl) {\n    if (!this._isStr(key)) return;\n    var time = Date.now();\n    var expire = Number(ttl) || 0;\n    var json = JSON.stringify({\n      time: time,\n      expire: expire,\n      data: data\n    });\n    window.localStorage.setItem(key, json);\n  },\n  // get saved data\n  get: function get(key) {\n    if (!this._isStr(key)) return;\n    var json = window.localStorage.getItem(key) || \'{}\';\n    var parsed = JSON.parse(json) || {};\n    var time = parsed.time,\n      expire = parsed.expire,\n      data = parsed.data;\n    if (this._isExpired(time, expire)) this["delete"](key);\n    return data;\n  },\n  // remove saved data\n  "delete": function _delete(key) {\n    if (!this._isStr(key)) return;\n    window.localStorage.removeItem(key);\n  },\n  // check valid string\n  _isStr: function _isStr(str) {\n    return str && typeof str === \'string\';\n  },\n  // check if data saved has expired\n  _isExpired: function _isExpired(time, expire) {\n    if (!time || !expire) return false;\n    var now = Date.now();\n    var secs = (now - time) / 1000;\n    return secs >= expire ? true : false;\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/store.js?')},"./src/js/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * Common utils\n */\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  // get search results off a list for an obj key\n  search: function search(list, key, _search) {\n    var regxp = new RegExp('^(' + _search + ')', 'i');\n    return list.filter(function (item) {\n      return regxp.test(item[key]);\n    });\n  },\n  // sort objects in an array by a key\n  sort: function sort(list, key, order, ignore) {\n    return list.sort(function (a, b) {\n      if (a.hasOwnProperty(key)) {\n        var _a = a[key];\n        var _b = b[key];\n        if (ignore) {\n          // sort strings using same case\n          _a = typeof _a === 'string' ? _a.toUpperCase() : _a;\n          _b = typeof _b === 'string' ? _b.toUpperCase() : _b;\n        }\n        if (order === 'asc') {\n          if (_a < _b) return -1;\n          if (_a > _b) return 1;\n        }\n        if (order === 'desc') {\n          if (_a > _b) return -1;\n          if (_a < _b) return 1;\n        }\n      }\n      return 0;\n    });\n  }\n});\n\n//# sourceURL=webpack://azuracast-player/./src/js/utils.js?")},"./src/scss/app.scss":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://azuracast-player/./src/scss/app.scss?")}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(n,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),__webpack_require__.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/app.js")})();